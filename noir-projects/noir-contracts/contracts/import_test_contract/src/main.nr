// Contract that uses the autogenerated interface of the Test contract for calling its functions.
// Used for testing calling into other contracts via autogenerated interfaces.
contract ImportTest {
    use dep::aztec::prelude::AztecAddress;

    use dep::test::{Test, Test::DeepStruct, Test::DummyNote};

    use dep::test::Test::FieldNote;
    use dep::test::Test::ValueNote;

    // Calls the test_code_gen on the Test contract at the target address
    // Used for testing calling a function with arguments of multiple types
    // See yarn-project/simulator/src/client/private_execution.ts
    // See yarn-project/end-to-end/src/e2e_nested_contract.test.ts
    #[aztec(private)]
    fn main_contract(target: AztecAddress) -> Field {
        Test::at(target).test_code_gen(
            1,
            true,
            1 as u32,
            [1, 2],
            DummyNote { amount: 1, secret_hash: 2 },
            DeepStruct {
            a_field: 1,
            a_bool: true,
            a_note: DummyNote { amount: 1, secret_hash: 2 },
            many_notes: [
                DummyNote { amount: 1, secret_hash: 2 },
                DummyNote { amount: 1, secret_hash: 2 },
                DummyNote { amount: 1, secret_hash: 2 }
            ]
        }
        ).call(&mut context)
    }

    // Calls the get_this_address on the Test contract at the target address
    // Used for testing calling a function with no arguments
    // See yarn-project/end-to-end/src/e2e_nested_contract.test.ts
    #[aztec(private)]
    fn call_no_args(target: AztecAddress) -> AztecAddress {
        Test::at(target).get_this_address().call(&mut context)
    }

    // Calls the create_nullifier_public on the Test contract at the target address
    // Used for testing calling an open function
    // See yarn-project/end-to-end/src/e2e_nested_contract.test.ts
    #[aztec(private)]
    fn call_open_fn(target: AztecAddress) {
        Test::at(target).create_nullifier_public(1, 2).enqueue(&mut context);
    }

    // Calls the create_nullifier_public on the Test contract at the target address
    // Used for testing calling an open function from another open function
    // See yarn-project/end-to-end/src/e2e_nested_contract.test.ts
    #[aztec(public)]
    fn pub_call_open_fn(target: AztecAddress) {
        Test::at(target).create_nullifier_public(1, 2).call(&mut context);
    }
}

