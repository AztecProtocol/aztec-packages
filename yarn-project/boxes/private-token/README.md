This is a minimal [Aztec](https://aztec.network/) Noir smart contract and frontend bootstrapped with [`aztec-cli unbox`](https://github.com/AztecProtocol/aztec-packages/tree/master/yarn-project/cli). It is recommended you use the `aztec-cli unbox PrivateToken` command so that the repository is copied with needed modifications from the monorepo subpackage.

Some contract specific settings for `PrivateToken` are in a [config](src/config.ts) will require manual updates depending on your changes to the source code. `aztec-cli` can be installed with `npm i -g @aztec/cli`, if you don't have it already.

## Setup

Dependencies can be installed from the root of the package:

```bash
yarn
yarn install:noir
yarn install:sandbox
yarn build
```

In addition to the usual javascript dependencies, this project requires `nargo` (package manager) and `noir` (Aztec ZK smart contract language) in addition to `@aztec/aztec-cli`.

The former are installed within `yarn install:noir` which executes

```bash
curl -L https://raw.githubusercontent.com/noir-lang/noirup/main/install | bash

noirup -v aztec
```

This sandbox requires [Docker](https://www.docker.com/) to be installed _and running_ locally. In the event the image needs updating, you can run `yarn install:sandbox` which executes

```bash
docker pull aztecprotocol/aztec-sandbox:latest
```

## Getting started

After `yarn build` has run,`yarn start:sandbox` in one terminal will launch a local instance of the Aztec sandbox via Docker Compose and `yarn start:dev` will launch a frontend app for deploying and interacting with the PrivateToken contract.

At this point, [http://localhost:5173](http://localhost:5173) should provide a minimal smart contract frontend.

This folder should have the following directory structure:

```
|— README.md
|— package.json
|— src
       |-config.ts [PrivateToken specific configuration for the frontend]
       |— app
              |— [frontend TSX code]
       |- scripts
              |- [helpers for frontend to interact with contract on the sandbox]
       |— contracts
              |- [noir-lib Aztec helper functions]
              |— src
                     |— main.nr - the cloned noir contract, your starting point
                     |- [other .nr contract files]
               |— Nargo.toml
       |— artifacts
              |— private_token_contract.json - these are generated by the compile command
              |— private_token.ts
       |— tests
              |- privatetoken.test.ts - a simple end2end test deploying and testing the PrivateToken on a local sandbox.  requires sandbox and anvil to be running (yarn start:sandbox)
```

Most relevant to you is likely `src/contracts/main.nr` (and the build config `src/contracts/Nargo.toml`). This contains the example smart contract logic that the frontend displays, and is a good place to start writing Noir.

The `src/artifacts` folder can be generated from the command line with `yarn compile` which is an alias for

```bash
aztec-cli compile src/contracts --outdir ../artifacts --typescript ../artifacts
```

This will generate a [Contract ABI](https://www.alchemy.com/overviews/what-is-an-abi-of-a-smart-contract-examples-and-usage) and TypeScript class for the Aztec smart contract in `src/contracts/main.nr`, which the frontend uses to generate the UI.

Note: the `compile` command seems to generate a Typescript file which needs a single change -

```
import PrivateTokenContractAbiJson from 'PrivateToken.json' assert { type: 'json' };
// need to update the relative import to
import PrivateTokenContractAbiJson from './PrivateToken.json' assert { type: 'json' };
```

After compiling, you can re-deploy the upated noir smart contract from the web UI. The function interaction forms are generated from parsing the ContractABI, so they should update automatically after you recompile.

## Learn More

To learn more about Noir Smart Contract development, take a look at the following resources:

- [Awesome Noir](https://github.com/noir-lang/awesome-noir) - learn about the Noir programming language.

## Deploy on Aztec3

Coming Soon :)
