From 8110ae083d311c9b696e849e2471cbccc3b0f651 Mon Sep 17 00:00:00 2001
From: Ary Borenszweig <asterite@gmail.com>
Date: Mon, 30 Jun 2025 16:25:29 -0300
Subject: [PATCH] Patch

---
 tooling/noir_codegen/src/utils/demonomorphizer.ts   | 11 ++++++++++-
 tooling/noir_codegen/src/utils/typings_generator.ts |  4 +++-
 tooling/noir_codegen/tsconfig.json                  |  1 +
 3 files changed, 14 insertions(+), 2 deletions(-)

diff --git a/tooling/noir_codegen/src/utils/demonomorphizer.ts b/tooling/noir_codegen/src/utils/demonomorphizer.ts
index 2b33b57455..3f5887b3cb 100644
--- a/tooling/noir_codegen/src/utils/demonomorphizer.ts
+++ b/tooling/noir_codegen/src/utils/demonomorphizer.ts
@@ -199,7 +199,16 @@ export class Demonomorphizer {
           const unifiedStruct = structs[0];

           if (!structs.every((struct) => struct.args.length === unifiedStruct.args.length)) {
-            throw new Error('Same struct with different number of args encountered');
+            let message = "Same struct with different number of args encountered: ";
+            structs.forEach(function(struct) {
+              message += `${struct.structType.path} (`;
+              struct.args.forEach(function(arg) {
+                message += `${arg.kind}, `;
+              })
+              message += '), ';
+            });
+
+            throw new Error(message);
           }
           for (let i = 0; i < unifiedStruct.args.length; i++) {
             const argTypes = structs.map((struct) => struct.args[i]);
diff --git a/tooling/noir_codegen/src/utils/typings_generator.ts b/tooling/noir_codegen/src/utils/typings_generator.ts
index 886ae8b7c5..a80580a2a8 100644
--- a/tooling/noir_codegen/src/utils/typings_generator.ts
+++ b/tooling/noir_codegen/src/utils/typings_generator.ts
@@ -98,7 +98,9 @@ export class TypingsGenerator {
   ) {
     // Map all the types used in the ABIs to the demonomorphized types
     for (const { abi, circuitName, artifact } of circuits) {
-      const params = abi.parameters.map((param) => {
+      console.error(JSON.stringify(abi, null, 2));
+
+      const params = abi.parameters.map((param) => {
         const type = mapAbiTypeToAbiTypeWithGenerics(param.type, this.allTypes);
         return { name: param.name, type };
       });
diff --git a/tooling/noir_codegen/tsconfig.json b/tooling/noir_codegen/tsconfig.json
index 30dd2a7ee5..223eb568a2 100644
--- a/tooling/noir_codegen/tsconfig.json
+++ b/tooling/noir_codegen/tsconfig.json
@@ -10,6 +10,7 @@
     "resolveJsonModule": true,
     "strict": true,
     "noImplicitAny": false,
+    "skipLibCheck": true,
   },
   "include": [
     "src/**/*.ts"
--
2.45.2
